{"ast":null,"code":"var _jsxFileName = \"C:\\\\New folder (9)\\\\Diabetic-Retinopathy-Detection-main\\\\Final Hosted Web\\\\DockerRepo-RP-main\\\\src\\\\views\\\\Prediction.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { collection, query, where, getDoc, doc, getDocs, addDoc } from \"firebase/firestore\"; // Make sure to import the appropriate Firestore functions\nimport { ToggleButton, ToggleButtonGroup } from \"@mui/material\";\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport { db } from \"../firebaseConfig.js\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport MuiAlert from \"@mui/material/Alert\";\nimport { Button, Card, CardHeader, CardBody, CardFooter, CardTitle, FormGroup, Form, Input, Row, Col } from \"reactstrap\";\nimport axios from \"axios\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport moment from \"moment\";\nimport \"./cstyles.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction dataURLtoBlob(dataURL) {\n  const arr = dataURL.split(\",\");\n  const mime = arr[0].match(/:(.*?);/)[1];\n  const bstr = atob(arr[1]);\n  let n = bstr.length;\n  const u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new Blob([u8arr], {\n    type: mime\n  });\n}\nconst Prediction = () => {\n  _s();\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [documentId, setDocumentId] = useState(null);\n  const history = useNavigate();\n  const [paientData, setPatientData] = useState([]);\n  const [fileName, setFileName] = useState(\"\");\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [priviewImage, setPriviewImage] = useState(null);\n  const [predictionResult, setPredictionResult] = useState(null);\n  const [selectedCondition, setSelectedCondition] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [rawPredictionResult, setRawPredictionResult] = useState(null);\n  const [currentTimestamp, setCurrentTimestamp] = useState(moment());\n  const [dcommet, setDcommnet] = useState(\"\");\n  const resultRef = collection(db, \"predictions\");\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [snackbarMessage, setSnackbarMessage] = React.useState(\"\");\n  const handleCloseSnackbar = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n    setOpenSnackbar(false);\n  };\n  useEffect(() => {\n    if (documentId) {\n      getPatientDetails();\n    }\n  }, [documentId]);\n  const getPatientDetails = async () => {\n    const docRef = doc(db, \"patientDetails\", documentId);\n    const docSnap = await getDoc(docRef);\n    if (docSnap.exists()) {\n      console.log(\"Document data:\", docSnap.data());\n      setPatientData(docSnap.data());\n    } else {\n      console.log(\"No Patient data document!\");\n    }\n  };\n  const handleImageChange = e => {\n    console.log(\"error : 404\");\n    const file = e.target.files[0];\n    if (file) {\n      setFileName(file.name);\n      console.log(file.name);\n      const reader = new FileReader();\n      reader.onload = event => {\n        setSelectedImage(event.target.result);\n        setPriviewImage(null);\n        setPredictionResult(null);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const handleConditionChange = (event, newCondition) => {\n    setSelectedCondition(newCondition);\n    console.log(newCondition + \" mode selected\");\n  };\n  const handleSearch = async () => {\n    if (phoneNumber) {\n      const q = query(collection(db, \"patientDetails\"), where(\"mobileNo\", \"==\", phoneNumber));\n      const querySnapshot = await getDocs(q);\n      if (!querySnapshot.empty) {\n        const document = querySnapshot.docs[0];\n        setDocumentId(document.id);\n        await sessionStorage.setItem(\"documentId\", document.id);\n\n        // history(\"/patient\");\n        // history(\"/admin/prediction\");\n      } else {\n        // setDocumentId(\"Document not found\");\n        // sessionStorage.removeItem(\"documentId\");\n        setSnackbarMessage(\"Patient is not registerd, Please Register\");\n        setOpenSnackbar(true);\n        setTimeout(() => {\n          history(\"/admin/user-page\"); // Replace with your actual dashboard route\n        }, 3000);\n      }\n    }\n  };\n  const predictImagesWithAzureBackend = async (url, type) => {\n    if (selectedImage) {\n      setUploading(true);\n      const formData = new FormData();\n      formData.append('image', dataURLtoBlob(selectedImage));\n      console.log(\"stared prediction with \" + selectedCondition + \" selected.\");\n      axios.post(url, formData)\n      // axios({\n      //   method: \"POST\",\n      //   url: url,\n      //   params: {\n      //     api_key: apiKey,\n      //   },\n      //   data: selectedImage,\n      //   headers: {\n      //     \"Content-Type\": \"application/x-www-form-urlencoded\",\n      //   },\n      // })\n      .then(function (response) {\n        console.log(response.data);\n        setRawPredictionResult(response.data);\n        if (type == \"m\") {\n          setPredictionResult({\n            top: findClass(response.data.predicted_classes),\n            confidence: findHighestConfidence(response.data.predictions)\n          });\n        } else {\n          // setPredictionResult(response.data);\n          if (response.data.top == \"Preprocessed_cataract\") {\n            setPredictionResult({\n              top: \"Cataract Positive\",\n              confidence: response.data.confidence\n            });\n          } else if (response.data.top == \"Preprocessed_normal\") {\n            setPredictionResult({\n              top: \"Cataract Negative\",\n              confidence: response.data.confidence\n            });\n          } else if (response.data.top == \"Glaucoma\") {\n            setPredictionResult({\n              top: \"Glaucoma Positive\",\n              confidence: response.data.confidence\n            });\n          } else if (response.data.top == \"NonGlaucoma\") {\n            setPredictionResult({\n              top: \"Glaucoma Negative\",\n              confidence: response.data.confidence\n            });\n          } else if (response.data.top == \"dr\") {\n            setPredictionResult({\n              top: \"Diabetes Retinopathy Positive\",\n              confidence: response.data.confidence\n            });\n          } else if (response.data.top == \"no-dr\") {\n            setPredictionResult({\n              top: \"Diabetes Retinopathy Negative\",\n              confidence: response.data.confidence\n            });\n          } else {\n            setPredictionResult({\n              top: response.data.top,\n              confidence: response.data.confidence\n            });\n          }\n          // setPredictionResult({\n          //   top: response.data.top,\n          //   confidence: response.data.confidence,\n          // });\n        }\n        setPriviewImage(selectedImage);\n        setUploading(false);\n        setSelectedImage(null);\n      }).catch(function (error) {\n        console.log(\"prediction is unsuccessfull with error : \" + error);\n        setUploading(false);\n      });\n    }\n  };\n\n  // Roboflow Prediction Code\n  const predictImagesWithRoboflow = async () => {\n    if (selectedImage) {\n      setUploading(true);\n      const formData = new FormData();\n      formData.append('file', dataURLtoBlob(selectedImage));\n      console.log(\"started prediction with \" + selectedCondition + \" selected.\");\n      axios.post(\"https://detect.roboflow.com/retinal-classifaction/1?api_key=LNJN6fBuYKJvibYHYDg5\", formData).then(function (response) {\n        console.log(response.data);\n        setRawPredictionResult(response.data);\n        setPredictionResult({\n          top: response.data.predictions[0].class,\n          confidence: response.data.predictions[0].confidence\n        });\n        setPriviewImage(selectedImage);\n        setUploading(false);\n        setSelectedImage(null);\n      }).catch(function (error) {\n        console.log(\"prediction is unsuccessful with error : \" + error);\n        setUploading(false);\n      });\n    }\n  };\n  const PredicImageFunctionSelecter = () => {\n    if (selectedCondition == \"Glaucoma\") {\n      predictImagesWithRoboflow();\n      // predictImagesWithAzureBackend(\n      //   // \"https://reseachbackend.azurewebsites.net/predict/glaucoma\", \"s\"\n      // );\n    } else if (selectedCondition == \"Cataract\") {\n      predictImagesWithAzureBackend(\"https://reseachbackend.azurewebsites.net/predict/cataract\", \"s\");\n    } else if (selectedCondition == \"DME\") {\n      predictImagesWithAzureBackend(\"https://reseachbackend.azurewebsites.net/predict/dme\", \"s\");\n    } else if (selectedCondition == \"DR\") {\n      predictImagesWithAzureBackend(\"https://reseachbackend.azurewebsites.net/predict/dr\", \"s\");\n    } else {\n      console.log(\"wrong selection with: \" + selectedCondition);\n    }\n  };\n  const findHighestConfidence = predictions => {\n    let highestConfidence = 0;\n    for (const key in predictions) {\n      if (predictions[key].confidence > highestConfidence) {\n        highestConfidence = predictions[key].confidence;\n      }\n    }\n    return highestConfidence;\n  };\n  const findClass = predictClass => {\n    if (predictClass == \"Cataract\") {\n      return \"Cataract\";\n    } else if (predictClass == \"Glaucoma\") {\n      return \"Glaucoma\";\n    } else if (predictClass == \"Retinopathy\") {\n      return \"Diabetic Retinopathy\";\n    } else if (predictClass == \"DME\") {\n      return \"Diabetic Macular Edema\";\n    } else {\n      return \"Nomal\";\n    }\n  };\n  const FirebaseImageUploader = async () => {\n    const upoloadingimage = priviewImage;\n    const storage = getStorage();\n    if (upoloadingimage) {\n      try {\n        const storageRef = ref(storage, `images/${uuidv4() + \"_\" + fileName}`);\n        const uploadTask = uploadBytesResumable(storageRef, dataURLtoBlob(upoloadingimage));\n        uploadTask.on(\"state_changed\", snapshot => {\n          const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n          console.log(\"Upload is \" + progress + \"% done\");\n        }, error => {\n          console.log(error);\n        }, () => {\n          getDownloadURL(uploadTask.snapshot.ref).then(url => {\n            console.log(\"File uploaded successfully\");\n            console.log(url);\n            firebaesDocumentUpload(url);\n          }).catch(error => {\n            console.log(error);\n          });\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    } else {\n      console.log(\"no image is selected\");\n    }\n  };\n  const firebaesDocumentUpload = async imageUrl => {\n    console.log(\"firebase document upload started.\");\n    try {\n      const submitData = {\n        date: currentTimestamp.format(\"YYYY-MM-DD\"),\n        pationID: documentId,\n        results: predictionResult,\n        image_url: imageUrl,\n        rawData: rawPredictionResult,\n        comment: dcommet,\n        type: selectedCondition,\n        staus: \"pending\"\n      };\n      const docRef = await addDoc(resultRef, submitData);\n      const newDocId = docRef.id;\n      console.log(submitData);\n      console.log(\"Data submitted to Firebase successfully\");\n      console.log(\"Newly added document ID:\", newDocId);\n      setSnackbarMessage(\"Report Proceeded successfully\");\n      setOpenSnackbar(true);\n      setTimeout(() => {\n        history(\"/admin/dashboard\"); // Replace with your actual dashboard route\n      }, 1000);\n    } catch (error) {\n      console.error(\"Error submitting data to Firebase:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: documentId ? /*#__PURE__*/_jsxDEV(Row, {\n        children: [\" \", /*#__PURE__*/_jsxDEV(Col, {\n          md: \"7\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"card-user\",\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                children: \"Patient Info\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 378,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 377,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              className: \" col-md-10 mx-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-3 \",\n                    children: \"Full Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"col-md-auto \",\n                    children: \":\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 384,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-5 \",\n                    children: paientData.fullName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 385,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-3 \",\n                    children: \"Gender \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 389,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"col-md-auto \",\n                    children: \":\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 390,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-5 \",\n                    children: paientData.gender\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 391,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-3 \",\n                    children: \"Mobile No\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 395,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"col-md-auto \",\n                    children: \":\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 396,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-5 \",\n                    children: paientData.mobileNo\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 397,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-3 \",\n                    children: \"NIC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 400,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"col-md-auto \",\n                    children: \":\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 401,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-5 \",\n                    children: paientData.identityCardNo\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 402,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 399,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                children: \"Submit Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 409,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 408,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" p-2 \",\n                children: /*#__PURE__*/_jsxDEV(ToggleButtonGroup, {\n                  style: {\n                    display: \"flex\",\n                    justifyContent: \"center\"\n                  },\n                  value: selectedCondition,\n                  exclusive: true,\n                  onChange: handleConditionChange,\n                  children: [/*#__PURE__*/_jsxDEV(ToggleButton, {\n                    value: \"Glaucoma\",\n                    children: \"Glaucoma\"\n                  }, \"Glaucoma\", false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 419,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n                    value: \"Cataract\",\n                    children: \"Cataract\"\n                  }, \"Cataract\", false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n                    value: \"DME\",\n                    children: \"Diabetic Macular Edema\"\n                  }, \"DME\", false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 425,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n                    value: \"DR\",\n                    children: \"Diabetic Retinopathy\"\n                  }, \"DR\", false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 428,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" col-md-7 mx-4\",\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"image-input\",\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outlined\",\n                    component: \"span\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      accept: \"image/*\",\n                      onChange: handleImageChange,\n                      id: \"image-input\" // You can remove the id if it's not needed\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 462,\n                      columnNumber: 25\n                    }, this), \"Select Image\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 461,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 460,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 452,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: selectedImage && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"mx-4\",\n                    children: \"Seletd Image Preview\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 475,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: selectedImage,\n                    alt: \"Selected\",\n                    style: {\n                      marginLeft: \"4%\",\n                      maxWidth: \"25%\",\n                      maxHeight: \"300px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 476,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 474,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-3  col-md-5 mx-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn \"\n                  // style={{ backgroundColor: \"blue\" }}\n                  ,\n                  onClick: PredicImageFunctionSelecter,\n                  disabled: uploading || !selectedImage || !selectedCondition,\n                  children: uploading ? \"Predicting...\" : \"Predict\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"mx-3\",\n                  color: \"green\",\n                  variant: \"contained\",\n                  onClick: FirebaseImageUploader,\n                  disabled: !documentId || !predictionResult,\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n                  open: openSnackbar,\n                  autoHideDuration: 6000,\n                  onClose: handleCloseSnackbar,\n                  anchorOrigin: {\n                    vertical: \"top\",\n                    horizontal: \"center\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(MuiAlert, {\n                    onClose: handleCloseSnackbar,\n                    severity: snackbarMessage.includes(\"successfully\") ? \"success\" : \"error\",\n                    sx: {\n                      width: \"100%\"\n                    },\n                    children: snackbarMessage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 527,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 518,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 498,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this), predictionResult ?\n        /*#__PURE__*/\n        // Check if predictionResult is not null\n        _jsxDEV(Col, {\n          md: \"5\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"card-user\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"mt-3 w-25 mx-auto\",\n                children: \"Result\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 547,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"author\",\n                children: [priviewImage && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: priviewImage,\n                    alt: \"Selected\",\n                    style: {\n                      maxWidth: \"100%\",\n                      maxHeight: \"300px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 554,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 553,\n                  columnNumber: 25\n                }, this), predictionResult && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row mt-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \" col col-lg-4  \",\n                      children: \"Result\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 565,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"col-md-auto \",\n                      children: \":\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 566,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \" col col-lg-6\",\n                      children: predictionResult.top\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 567,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 564,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"col-lg-4 \",\n                      children: \"Modal Confidance\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 572,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"col-md-auto \",\n                      children: \":\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 573,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \" col col-lg-3 \",\n                      children: [(predictionResult.confidence * 100).toFixed(2), \"%\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 574,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 571,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 563,\n                  columnNumber: 25\n                }, this)\n\n                // <div className=\"p-3\">\n                //   <p>Result : {predictionResult.top}</p>\n                //   <p>\n                //     Modal Confidence : {predictionResult.confidence}\n                //   </p>\n                // </div>\n                ]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 551,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 550,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 546,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 545,\n          columnNumber: 15\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          style: {\n            marginTop: 140\n          },\n          className: \"mx-auto\",\n          md: \"5\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                children: \"Select Patient\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 598,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              children: /*#__PURE__*/_jsxDEV(Form, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  className: \"\",\n                  children: /*#__PURE__*/_jsxDEV(Col, {\n                    className: \"\",\n                    children: /*#__PURE__*/_jsxDEV(FormGroup, {\n                      className: \"row\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"  col-md-4 mt-2\",\n                        children: \"Patient Number :\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 607,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Input, {\n                        value: phoneNumber,\n                        onChange: e => setPhoneNumber(e.target.value),\n                        className: \"w-50\",\n                        maxLength: 10,\n                        defaultValue: \"Creative Code Inc.\",\n                        placeholder: \"Telephone..\",\n                        type: \"text\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 610,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Button, {\n                        onClick: handleSearch,\n                        className: \"btn-round w-25 mx-auto mt-4\",\n                        color: \"primary\",\n                        children: \"Submit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 619,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n                        open: openSnackbar,\n                        autoHideDuration: 6000,\n                        onClose: handleCloseSnackbar,\n                        anchorOrigin: {\n                          vertical: \"top\",\n                          horizontal: \"center\"\n                        },\n                        children: /*#__PURE__*/_jsxDEV(MuiAlert, {\n                          onClose: handleCloseSnackbar,\n                          severity: snackbarMessage.includes(\"successfully\") ? \"success\" : \"error\",\n                          sx: {\n                            width: \"25%\"\n                          },\n                          children: snackbarMessage\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 635,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 626,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 606,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 605,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 604,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 603,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 594,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(Prediction, \"L1CEtja74PfInO3UptVnwPcb/tg=\", false, function () {\n  return [useNavigate];\n});\n_c = Prediction;\nexport default Prediction;\nvar _c;\n$RefreshReg$(_c, \"Prediction\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","collection","query","where","getDoc","doc","getDocs","addDoc","ToggleButton","ToggleButtonGroup","getStorage","ref","uploadBytesResumable","getDownloadURL","db","Snackbar","MuiAlert","Button","Card","CardHeader","CardBody","CardFooter","CardTitle","FormGroup","Form","Input","Row","Col","axios","v4","uuidv4","moment","jsxDEV","_jsxDEV","Fragment","_Fragment","dataURLtoBlob","dataURL","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","Blob","type","Prediction","_s","phoneNumber","setPhoneNumber","documentId","setDocumentId","history","paientData","setPatientData","fileName","setFileName","selectedImage","setSelectedImage","priviewImage","setPriviewImage","predictionResult","setPredictionResult","selectedCondition","setSelectedCondition","uploading","setUploading","rawPredictionResult","setRawPredictionResult","currentTimestamp","setCurrentTimestamp","dcommet","setDcommnet","resultRef","openSnackbar","setOpenSnackbar","snackbarMessage","setSnackbarMessage","handleCloseSnackbar","event","reason","getPatientDetails","docRef","docSnap","exists","console","log","data","handleImageChange","e","file","target","files","name","reader","FileReader","onload","result","readAsDataURL","handleConditionChange","newCondition","handleSearch","q","querySnapshot","empty","document","docs","id","sessionStorage","setItem","setTimeout","predictImagesWithAzureBackend","url","formData","FormData","append","post","then","response","top","findClass","predicted_classes","confidence","findHighestConfidence","predictions","catch","error","predictImagesWithRoboflow","class","PredicImageFunctionSelecter","highestConfidence","key","predictClass","FirebaseImageUploader","upoloadingimage","storage","storageRef","uploadTask","on","snapshot","progress","bytesTransferred","totalBytes","firebaesDocumentUpload","imageUrl","submitData","date","format","pationID","results","image_url","rawData","comment","staus","newDocId","children","className","md","tag","_jsxFileName","lineNumber","columnNumber","fullName","gender","mobileNo","identityCardNo","style","display","justifyContent","value","exclusive","onChange","htmlFor","variant","component","accept","src","alt","marginLeft","maxWidth","maxHeight","onClick","disabled","color","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","includes","sx","width","toFixed","marginTop","maxLength","defaultValue","placeholder","_c","$RefreshReg$"],"sources":["C:/New folder (9)/Diabetic-Retinopathy-Detection-main/Final Hosted Web/DockerRepo-RP-main/src/views/Prediction.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  collection,\n  query,\n  where,\n  getDoc,\n  doc,\n  getDocs,\n  addDoc,\n} from \"firebase/firestore\"; // Make sure to import the appropriate Firestore functions\nimport { ToggleButton, ToggleButtonGroup } from \"@mui/material\";\nimport {\n  getStorage,\n  ref,\n  uploadBytesResumable,\n  getDownloadURL,\n} from \"firebase/storage\";\nimport { db } from \"../firebaseConfig.js\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport MuiAlert from \"@mui/material/Alert\";\n\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  CardTitle,\n  FormGroup,\n  Form,\n  Input,\n  Row,\n  Col,\n} from \"reactstrap\";\nimport axios from \"axios\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport moment from \"moment\";\nimport \"./cstyles.css\";\n\nfunction dataURLtoBlob(dataURL) {\n  const arr = dataURL.split(\",\");\n  const mime = arr[0].match(/:(.*?);/)[1];\n  const bstr = atob(arr[1]);\n  let n = bstr.length;\n  const u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new Blob([u8arr], { type: mime });\n}\n\nconst Prediction = () => {\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [documentId, setDocumentId] = useState(null);\n  const history = useNavigate();\n  const [paientData, setPatientData] = useState([]);\n  const [fileName, setFileName] = useState(\"\");\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [priviewImage, setPriviewImage] = useState(null);\n  const [predictionResult, setPredictionResult] = useState(null);\n  const [selectedCondition, setSelectedCondition] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [rawPredictionResult, setRawPredictionResult] = useState(null);\n  const [currentTimestamp, setCurrentTimestamp] = useState(moment());\n  const [dcommet, setDcommnet] = useState(\"\");\n  const resultRef = collection(db, \"predictions\");\n\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [snackbarMessage, setSnackbarMessage] = React.useState(\"\");\n\n  const handleCloseSnackbar = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n    setOpenSnackbar(false);\n  };\n\n  useEffect(() => {\n    if (documentId) {\n      getPatientDetails();\n    }\n  }, [documentId]);\n\n  const getPatientDetails = async () => {\n    const docRef = doc(db, \"patientDetails\", documentId);\n    const docSnap = await getDoc(docRef);\n    if (docSnap.exists()) {\n      console.log(\"Document data:\", docSnap.data());\n      setPatientData(docSnap.data());\n    } else {\n      console.log(\"No Patient data document!\");\n    }\n  };\n\n  const handleImageChange = (e) => {\n    console.log(\"error : 404\");\n    const file = e.target.files[0];\n    if (file) {\n      setFileName(file.name);\n      console.log(file.name);\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        setSelectedImage(event.target.result);\n        setPriviewImage(null);\n        setPredictionResult(null);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleConditionChange = (event, newCondition) => {\n    setSelectedCondition(newCondition);\n    console.log(newCondition + \" mode selected\");\n  };\n\n  const handleSearch = async () => {\n    if (phoneNumber) {\n      const q = query(\n        collection(db, \"patientDetails\"),\n        where(\"mobileNo\", \"==\", phoneNumber)\n      );\n      const querySnapshot = await getDocs(q);\n\n      if (!querySnapshot.empty) {\n        const document = querySnapshot.docs[0];\n        setDocumentId(document.id);\n        await sessionStorage.setItem(\"documentId\", document.id);\n\n        // history(\"/patient\");\n        // history(\"/admin/prediction\");\n      } else {\n        // setDocumentId(\"Document not found\");\n        // sessionStorage.removeItem(\"documentId\");\n        setSnackbarMessage(\"Patient is not registerd, Please Register\");\n        setOpenSnackbar(true);\n        setTimeout(() => {\n          history(\"/admin/user-page\"); // Replace with your actual dashboard route\n        }, 3000);\n      }\n    }\n  };\n\n  const predictImagesWithAzureBackend = async (url, type) => {\n    if (selectedImage) {\n      setUploading(true);\n      const formData = new FormData();\n      formData.append('image', dataURLtoBlob(selectedImage)); \n\n\n      console.log(\"stared prediction with \" + selectedCondition + \" selected.\");\n      axios.post(url, formData)\n      // axios({\n      //   method: \"POST\",\n      //   url: url,\n      //   params: {\n      //     api_key: apiKey,\n      //   },\n      //   data: selectedImage,\n      //   headers: {\n      //     \"Content-Type\": \"application/x-www-form-urlencoded\",\n      //   },\n      // })\n        .then(function (response) {\n          console.log(response.data);\n          setRawPredictionResult(response.data);\n          if (type == \"m\") {\n            setPredictionResult({\n              top: findClass(response.data.predicted_classes),\n              confidence: findHighestConfidence(response.data.predictions),\n            });\n          } else {\n            // setPredictionResult(response.data);\n            if (response.data.top == \"Preprocessed_cataract\") {\n              setPredictionResult({\n                top: \"Cataract Positive\",\n                confidence: response.data.confidence,\n              });\n            } else if (response.data.top == \"Preprocessed_normal\") {\n              setPredictionResult({\n                top: \"Cataract Negative\",\n                confidence: response.data.confidence,\n              });\n            } else if (response.data.top == \"Glaucoma\") {\n              setPredictionResult({\n                top: \"Glaucoma Positive\",\n                confidence: response.data.confidence,\n              });\n            } else if (response.data.top == \"NonGlaucoma\") {\n              setPredictionResult({\n                top: \"Glaucoma Negative\",\n                confidence: response.data.confidence,\n              });\n            } else if (response.data.top == \"dr\") {\n              setPredictionResult({\n                top: \"Diabetes Retinopathy Positive\",\n                confidence: response.data.confidence,\n              });\n            } else if (response.data.top == \"no-dr\") {\n              setPredictionResult({\n                top: \"Diabetes Retinopathy Negative\",\n                confidence: response.data.confidence,\n              });\n            } else {\n              setPredictionResult({\n                top: response.data.top,\n                confidence: response.data.confidence,\n              });\n            }\n            // setPredictionResult({\n            //   top: response.data.top,\n            //   confidence: response.data.confidence,\n            // });\n          }\n          setPriviewImage(selectedImage);\n          setUploading(false);\n          setSelectedImage(null);\n        })\n        .catch(function (error) {\n          console.log(\"prediction is unsuccessfull with error : \" + error);\n          setUploading(false);\n        });\n    }\n  };\n\n  // Roboflow Prediction Code\nconst predictImagesWithRoboflow = async () => {\n  if (selectedImage) {\n    setUploading(true);\n    const formData = new FormData();\n    formData.append('file', dataURLtoBlob(selectedImage));\n    \n    console.log(\"started prediction with \" + selectedCondition + \" selected.\");\n    axios.post(\"https://detect.roboflow.com/retinal-classifaction/1?api_key=LNJN6fBuYKJvibYHYDg5\", formData)\n      .then(function (response) {\n        console.log(response.data);\n        setRawPredictionResult(response.data);\n        setPredictionResult({\n          top: response.data.predictions[0].class,\n          confidence: response.data.predictions[0].confidence,\n        });\n        setPriviewImage(selectedImage);\n        setUploading(false);\n        setSelectedImage(null);\n      })\n      .catch(function (error) {\n        console.log(\"prediction is unsuccessful with error : \" + error);\n        setUploading(false);\n      });\n  }\n};\n  const PredicImageFunctionSelecter = () => {\n    if (selectedCondition == \"Glaucoma\") {\n      predictImagesWithRoboflow()\n      // predictImagesWithAzureBackend(\n      //   // \"https://reseachbackend.azurewebsites.net/predict/glaucoma\", \"s\"\n      // );\n    } else if (selectedCondition == \"Cataract\") {\n      predictImagesWithAzureBackend(\n        \"https://reseachbackend.azurewebsites.net/predict/cataract\", \"s\"\n      );\n    } else if (selectedCondition == \"DME\") {\n      predictImagesWithAzureBackend(\n        \"https://reseachbackend.azurewebsites.net/predict/dme\", \"s\"\n      );\n    } else if (selectedCondition == \"DR\") {\n      predictImagesWithAzureBackend(\n        \"https://reseachbackend.azurewebsites.net/predict/dr\", \"s\"\n      );\n    } else {\n      console.log(\"wrong selection with: \" + selectedCondition);\n    }\n  };\n\n  const findHighestConfidence = (predictions) => {\n    let highestConfidence = 0;\n    for (const key in predictions) {\n      if (predictions[key].confidence > highestConfidence) {\n        highestConfidence = predictions[key].confidence;\n      }\n    }\n    return highestConfidence;\n  };\n\n  const findClass = (predictClass) => {\n    if (predictClass == \"Cataract\") {\n      return \"Cataract\";\n    } else if (predictClass == \"Glaucoma\") {\n      return \"Glaucoma\";\n    } else if (predictClass == \"Retinopathy\") {\n      return \"Diabetic Retinopathy\";\n    } else if (predictClass == \"DME\") {\n      return \"Diabetic Macular Edema\";\n    } else {\n      return \"Nomal\";\n    }\n  };\n\n  const FirebaseImageUploader = async () => {\n    const upoloadingimage = priviewImage;\n    const storage = getStorage();\n    if (upoloadingimage) {\n      try {\n        const storageRef = ref(storage, `images/${uuidv4() + \"_\" + fileName}`);\n        const uploadTask = uploadBytesResumable(\n          storageRef,\n          dataURLtoBlob(upoloadingimage)\n        );\n\n        uploadTask.on(\n          \"state_changed\",\n          (snapshot) => {\n            const progress =\n              (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log(\"Upload is \" + progress + \"% done\");\n          },\n          (error) => {\n            console.log(error);\n          },\n          () => {\n            getDownloadURL(uploadTask.snapshot.ref)\n              .then((url) => {\n                console.log(\"File uploaded successfully\");\n                console.log(url);\n                firebaesDocumentUpload(url);\n              })\n              .catch((error) => {\n                console.log(error);\n              });\n          }\n        );\n      } catch (error) {\n        console.log(error);\n      }\n    } else {\n      console.log(\"no image is selected\");\n    }\n  };\n\n  const firebaesDocumentUpload = async (imageUrl) => {\n    console.log(\"firebase document upload started.\");\n    try {\n      const submitData = {\n        date: currentTimestamp.format(\"YYYY-MM-DD\"),\n        pationID: documentId,\n        results: predictionResult,\n        image_url: imageUrl,\n        rawData: rawPredictionResult,\n        comment: dcommet,\n        type: selectedCondition,\n        staus: \"pending\",\n      };\n      const docRef = await addDoc(resultRef, submitData);\n      const newDocId = docRef.id;\n      console.log(submitData);\n      console.log(\"Data submitted to Firebase successfully\");\n      console.log(\"Newly added document ID:\", newDocId);\n      setSnackbarMessage(\"Report Proceeded successfully\");\n      setOpenSnackbar(true);\n      setTimeout(() => {\n        history(\"/admin/dashboard\"); // Replace with your actual dashboard route\n      }, 1000);\n    } catch (error) {\n      console.error(\"Error submitting data to Firebase:\", error);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"content\">\n        {documentId ? (\n          <Row>\n            {\" \"}\n            {/* form and patient dtl */}\n            <Col md=\"7\">\n              <Card className=\"card-user\">\n                <CardHeader>\n                  <CardTitle tag=\"h5\">Patient Info</CardTitle>\n                </CardHeader>\n                <CardBody className=\" col-md-10 mx-4\">\n                  <div className=\"\">\n                    <div className=\"row\">\n                      <p className=\" col col-lg-3 \">Full Name</p>\n                      <p className=\"col-md-auto \">:</p>\n                      <p className=\" col col-lg-5 \">{paientData.fullName}</p>\n                    </div>\n\n                    <div className=\"row\">\n                      <p className=\" col col-lg-3 \">Gender </p>\n                      <p className=\"col-md-auto \">:</p>\n                      <p className=\" col col-lg-5 \">{paientData.gender}</p>\n                    </div>\n\n                    <div className=\"row\">\n                      <p className=\" col col-lg-3 \">Mobile No</p>\n                      <p className=\"col-md-auto \">:</p>\n                      <p className=\" col col-lg-5 \">{paientData.mobileNo}</p>\n                    </div>\n                    <div className=\"row\">\n                      <p className=\" col col-lg-3 \">NIC</p>\n                      <p className=\"col-md-auto \">:</p>\n                      <p className=\" col col-lg-5 \">\n                        {paientData.identityCardNo}\n                      </p>\n                    </div>\n                  </div>\n                </CardBody>\n                <CardHeader>\n                  <CardTitle tag=\"h5\">Submit Image</CardTitle>\n                </CardHeader>\n                <CardBody>\n                  <div className=\" p-2 \">\n                    <ToggleButtonGroup\n                      style={{ display: \"flex\", justifyContent: \"center\" }}\n                      value={selectedCondition}\n                      exclusive\n                      onChange={handleConditionChange}\n                    >\n                      <ToggleButton key=\"Glaucoma\" value=\"Glaucoma\">\n                        Glaucoma\n                      </ToggleButton>\n                      <ToggleButton key=\"Cataract\" value=\"Cataract\">\n                        Cataract\n                      </ToggleButton>\n                      <ToggleButton key=\"DME\" value=\"DME\">\n                        Diabetic Macular Edema\n                      </ToggleButton>\n                      <ToggleButton key=\"DR\" value=\"DR\">\n                        Diabetic Retinopathy\n                      </ToggleButton>\n                      {/* <ToggleButton value=\"auto\">AUTO</ToggleButton>\n                      {selectedCondition == \"auto\" ? (\n                        <ToggleButton value=\"manual\">Manual</ToggleButton>\n                      ) : (\n                        [\n                          <ToggleButton key=\"Glaucoma\" value=\"Glaucoma\">\n                            Glaucoma\n                          </ToggleButton>,\n                          <ToggleButton key=\"Cataract\" value=\"Cataract\">\n                            Cataract\n                          </ToggleButton>,\n                          <ToggleButton key=\"DME\" value=\"DME\">\n                            DME\n                          </ToggleButton>,\n                          <ToggleButton key=\"DR\" value=\"DR\">\n                            DR\n                          </ToggleButton>,\n                        ]\n                      )} */}\n                    </ToggleButtonGroup>\n                  </div>\n                  <div className=\" col-md-7 mx-4\">\n                    {/* <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleImageChange}\n                      id=\"image-input\" // You can remove the id if it's not needed\n                    /> */}\n\n                    <label htmlFor=\"image-input\">\n                      <Button variant=\"outlined\" component=\"span\">\n                        <input\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={handleImageChange}\n                          id=\"image-input\" // You can remove the id if it's not needed\n                        />\n                        Select Image\n                      </Button>\n                    </label>\n                  </div>\n                  <div>\n                    {selectedImage && (\n                      <div>\n                        <h5 className=\"mx-4\">Seletd Image Preview</h5>\n                        <img\n                          src={selectedImage}\n                          alt=\"Selected\"\n                          style={{\n                            marginLeft: \"4%\",\n                            maxWidth: \"25%\",\n                            maxHeight: \"300px\",\n                          }}\n                        />\n                      </div>\n                    )}\n                  </div>\n                  {/* <Button\n                    variant=\"contained\"\n                    color=\"blue\"\n                    onClick={PredicImageFunctionSelecter}\n                    disabled={uploading || !selectedImage || !selectedCondition}\n                    sx={{ mt: 2 }}\n                  >\n                    {uploading ? \"Predicting...\" : \"Predict\"}\n                  </Button> */}\n\n                  <div className=\"mt-3  col-md-5 mx-4\">\n                    <button\n                      className=\"btn \"\n                      // style={{ backgroundColor: \"blue\" }}\n                      onClick={PredicImageFunctionSelecter}\n                      disabled={\n                        uploading || !selectedImage || !selectedCondition\n                      }\n                    >\n                      {uploading ? \"Predicting...\" : \"Predict\"}\n                    </button>\n                    <Button\n                      className=\"mx-3\"\n                      color=\"green\"\n                      variant=\"contained\"\n                      onClick={FirebaseImageUploader}\n                      disabled={!documentId || !predictionResult}\n                    >\n                      Save\n                    </Button>\n                    <Snackbar\n                      open={openSnackbar}\n                      autoHideDuration={6000}\n                      onClose={handleCloseSnackbar}\n                      anchorOrigin={{\n                        vertical: \"top\",\n                        horizontal: \"center\",\n                      }}\n                    >\n                      <MuiAlert\n                        onClose={handleCloseSnackbar}\n                        severity={\n                          snackbarMessage.includes(\"successfully\")\n                            ? \"success\"\n                            : \"error\"\n                        }\n                        sx={{ width: \"100%\" }}\n                      >\n                        {snackbarMessage}\n                      </MuiAlert>\n                    </Snackbar>\n                  </div>\n                </CardBody>\n              </Card>\n            </Col>\n            {/* imge display and result */}\n            {predictionResult ? ( // Check if predictionResult is not null\n              <Col md=\"5\">\n                <Card className=\"card-user\">\n                  <div className=\"image\">\n                    <h3 className=\"mt-3 w-25 mx-auto\">Result</h3>\n                  </div>\n                  <CardBody>\n                    <div className=\"author\">\n                      {priviewImage && (\n                        <div>\n                          <img\n                            src={priviewImage}\n                            alt=\"Selected\"\n                            style={{ maxWidth: \"100%\", maxHeight: \"300px\" }}\n                          />\n                        </div>\n                      )}\n\n                      {predictionResult && (\n                        <div className=\"\">\n                          <div className=\"row mt-4\">\n                            <p className=\" col col-lg-4  \">Result</p>\n                            <p className=\"col-md-auto \">:</p>\n                            <p className=\" col col-lg-6\">\n                              {predictionResult.top}\n                            </p>\n                          </div>\n                          <div className=\"row\">\n                            <p className=\"col-lg-4 \">Modal Confidance</p>\n                            <p className=\"col-md-auto \">:</p>\n                            <p className=\" col col-lg-3 \">\n                              {(predictionResult.confidence * 100).toFixed(2)}%\n                            </p>\n                          </div>\n                        </div>\n\n                        // <div className=\"p-3\">\n                        //   <p>Result : {predictionResult.top}</p>\n                        //   <p>\n                        //     Modal Confidence : {predictionResult.confidence}\n                        //   </p>\n                        // </div>\n                      )}\n                    </div>\n                  </CardBody>\n                </Card>\n              </Col>\n            ) : null}\n          </Row>\n        ) : (\n          <Row>\n            <Col style={{ marginTop: 140 }} className=\"mx-auto\" md=\"5\">\n              <Card>\n                <CardHeader>\n                  <CardTitle tag=\"h5\">Select Patient</CardTitle>\n                </CardHeader>\n                {/* <div className=\"card rounded-3\"></div> */}\n\n                <CardBody>\n                  <Form>\n                    <Row className=\"\">\n                      <Col className=\"\">\n                        <FormGroup className=\"row\">\n                          <label className=\"  col-md-4 mt-2\">\n                            Patient Number :\n                          </label>\n                          <Input\n                            value={phoneNumber}\n                            onChange={(e) => setPhoneNumber(e.target.value)}\n                            className=\"w-50\"\n                            maxLength={10}\n                            defaultValue=\"Creative Code Inc.\"\n                            placeholder=\"Telephone..\"\n                            type=\"text\"\n                          />\n                          <Button\n                            onClick={handleSearch}\n                            className=\"btn-round w-25 mx-auto mt-4\"\n                            color=\"primary\"\n                          >\n                            Submit\n                          </Button>\n                          <Snackbar\n                            open={openSnackbar}\n                            autoHideDuration={6000}\n                            onClose={handleCloseSnackbar}\n                            anchorOrigin={{\n                              vertical: \"top\",\n                              horizontal: \"center\",\n                            }}\n                          >\n                            <MuiAlert\n                              onClose={handleCloseSnackbar}\n                              severity={\n                                snackbarMessage.includes(\"successfully\")\n                                  ? \"success\"\n                                  : \"error\"\n                              }\n                              sx={{ width: \"25%\" }}\n                            >\n                              {snackbarMessage}\n                            </MuiAlert>\n                          </Snackbar>\n                        </FormGroup>\n                      </Col>\n                    </Row>\n                  </Form>\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Prediction;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}