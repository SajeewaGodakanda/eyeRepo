{"ast":null,"code":"var _jsxFileName = \"C:\\\\New folder (9)\\\\Diabetic-Retinopathy-Detection-main\\\\Final Hosted Web\\\\DockerRepo-RP-main\\\\src\\\\views\\\\Prediction.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { collection, query, where, getDoc, doc, getDocs, addDoc } from \"firebase/firestore\"; // Make sure to import the appropriate Firestore functions\nimport { ToggleButton, ToggleButtonGroup } from \"@mui/material\";\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL } from \"firebase/storage\";\nimport { db } from \"../firebaseConfig.js\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport MuiAlert from \"@mui/material/Alert\";\nimport { Button, Card, CardHeader, CardBody, CardFooter, CardTitle, FormGroup, Form, Input, Row, Col } from \"reactstrap\";\nimport axios from \"axios\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport moment from \"moment\";\nimport \"./cstyles.css\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction dataURLtoBlob(dataURL) {\n  const arr = dataURL.split(\",\");\n  const mime = arr[0].match(/:(.*?);/)[1];\n  const bstr = atob(arr[1]);\n  let n = bstr.length;\n  const u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new Blob([u8arr], {\n    type: mime\n  });\n}\nconst Prediction = () => {\n  _s();\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [documentId, setDocumentId] = useState(null);\n  const history = useNavigate();\n  const [paientData, setPatientData] = useState([]);\n  const [fileName, setFileName] = useState(\"\");\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [priviewImage, setPriviewImage] = useState(null);\n  const [predictionResult, setPredictionResult] = useState(null);\n  const [selectedCondition, setSelectedCondition] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [rawPredictionResult, setRawPredictionResult] = useState(null);\n  const [currentTimestamp, setCurrentTimestamp] = useState(moment());\n  const [dcommet, setDcommnet] = useState(\"\");\n  const resultRef = collection(db, \"predictions\");\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [snackbarMessage, setSnackbarMessage] = React.useState(\"\");\n  const handleCloseSnackbar = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n    setOpenSnackbar(false);\n  };\n  useEffect(() => {\n    if (documentId) {\n      getPatientDetails();\n    }\n  }, [documentId]);\n  const getPatientDetails = async () => {\n    const docRef = doc(db, \"patientDetails\", documentId);\n    const docSnap = await getDoc(docRef);\n    if (docSnap.exists()) {\n      console.log(\"Document data:\", docSnap.data());\n      setPatientData(docSnap.data());\n    } else {\n      console.log(\"No Patient data document!\");\n    }\n  };\n  const handleImageChange = e => {\n    console.log(\"error : 404\");\n    const file = e.target.files[0];\n    if (file) {\n      setFileName(file.name);\n      console.log(file.name);\n      const reader = new FileReader();\n      reader.onload = event => {\n        setSelectedImage(event.target.result);\n        setPriviewImage(null);\n        setPredictionResult(null);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n  const handleConditionChange = (event, newCondition) => {\n    setSelectedCondition(newCondition);\n    console.log(newCondition + \" mode selected\");\n  };\n  const handleSearch = async () => {\n    if (phoneNumber) {\n      const q = query(collection(db, \"patientDetails\"), where(\"mobileNo\", \"==\", phoneNumber));\n      const querySnapshot = await getDocs(q);\n      if (!querySnapshot.empty) {\n        const document = querySnapshot.docs[0];\n        setDocumentId(document.id);\n        await sessionStorage.setItem(\"documentId\", document.id);\n\n        // history(\"/patient\");\n        // history(\"/admin/prediction\");\n      } else {\n        // setDocumentId(\"Document not found\");\n        // sessionStorage.removeItem(\"documentId\");\n        setSnackbarMessage(\"Patient is not registerd, Please Register\");\n        setOpenSnackbar(true);\n        setTimeout(() => {\n          history(\"/admin/user-page\"); // Replace with your actual dashboard route\n        }, 3000);\n      }\n    }\n  };\n\n  // const predictImagesWithAzureBackend = async (url, type) => {\n  //   if (selectedImage) {\n  //     setUploading(true);\n  //     const formData = new FormData();\n  //     formData.append('image', dataURLtoBlob(selectedImage)); \n\n  //     console.log(\"stared prediction with \" + selectedCondition + \" selected.\");\n  //     axios.post(url, formData)\n  //     // axios({\n  //     //   method: \"POST\",\n  //     //   url: url,\n  //     //   params: {\n  //     //     api_key: apiKey,\n  //     //   },\n  //     //   data: selectedImage,\n  //     //   headers: {\n  //     //     \"Content-Type\": \"application/x-www-form-urlencoded\",\n  //     //   },\n  //     // })\n  //       .then(function (response) {\n  //         console.log(response.data);\n  //         setRawPredictionResult(response.data);\n  //         if (type == \"m\") {\n  //           setPredictionResult({\n  //             top: findClass(response.data.predicted_classes),\n  //             confidence: findHighestConfidence(response.data.predictions),\n  //           });\n  //         } else {\n  //           // setPredictionResult(response.data);\n  //           if (response.data.top == \"Preprocessed_cataract\") {\n  //             setPredictionResult({\n  //               top: \"Cataract Positive\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else if (response.data.top == \"Preprocessed_normal\") {\n  //             setPredictionResult({\n  //               top: \"Cataract Negative\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else if (response.data.top == \"Glaucoma\") {\n  //             setPredictionResult({\n  //               top: \"Glaucoma Positive\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else if (response.data.top == \"NonGlaucoma\") {\n  //             setPredictionResult({\n  //               top: \"Glaucoma Negative\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else if (response.data.top == \"dr\") {\n  //             setPredictionResult({\n  //               top: \"Diabetes Retinopathy Positive\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else if (response.data.top == \"no-dr\") {\n  //             setPredictionResult({\n  //               top: \"Diabetes Retinopathy Negative\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else {\n  //             setPredictionResult({\n  //               top: response.data.top,\n  //               confidence: response.data.confidence,\n  //             });\n  //           }\n  //           // setPredictionResult({\n  //           //   top: response.data.top,\n  //           //   confidence: response.data.confidence,\n  //           // });\n  //         }\n  //         setPriviewImage(selectedImage);\n  //         setUploading(false);\n  //         setSelectedImage(null);\n  //       })\n  //       .catch(function (error) {\n  //         console.log(\"prediction is unsuccessfull with error : \" + error);\n  //         setUploading(false);\n  //       });\n  //   }\n  // };\n\n  // Roboflow Prediction Code\n  // }\n  const predictImagesWithRoboflow = async (url, apiKey, type) => {\n    if (selectedImage) {\n      setUploading(true);\n      console.log(\"stared prediction with \" + selectedCondition + \" selected.\");\n      axios({\n        method: \"POST\",\n        url: url,\n        params: {\n          api_key: apiKey\n        },\n        data: selectedImage,\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\"\n        }\n      }).then(function (response) {\n        console.log(response.data);\n        setRawPredictionResult(response.data);\n        if (type == \"m\") {\n          setPredictionResult({\n            \"top\": findClass(response.data.predicted_classes),\n            \"confidence\": findHighestConfidence(response.data.predictions)\n          });\n        } else {\n          // setPredictionResult(response.data);\n          setPredictionResult({\n            \"top\": response.data.top,\n            \"confidence\": response.data.confidence\n          });\n        }\n        setPriviewImage(selectedImage);\n        setUploading(false);\n        setSelectedImage(null);\n      }).catch(function (error) {\n        console.log(\"prediction is unsuccessfull with error : \" + error);\n        setUploading(false);\n      });\n    }\n  };\n  const PredicImageFunctionSelecter = () => {\n    if (selectedCondition == \"auto\") {\n      predictImagesWithRoboflow(\"https://classify.roboflow.com/diabetes-eye/1\", \"0T0aK7Xjd9yIzFwoaeXP\", \"m\");\n    } else if (selectedCondition == \"Glaucoma\") {\n      predictImagesWithRoboflow(\"https://classify.roboflow.com/glaucoma-detection-yinkv/1\", \"5C7iBYDUnNm6VVwqY7t1\", \"s\");\n    } else if (selectedCondition == \"Cataract\") {\n      predictImagesWithRoboflow(\"https://classify.roboflow.com/cataract-classification-thmfz/4\", \"DLxfzIwIH2SKWI74qxdY\", \"s\");\n    } else if (selectedCondition == \"DME\") {\n      predictImagesWithRoboflow(\"https://detect.roboflow.com/retinal-classifaction/1\", \"LNJN6fBuYKJvibYHYDg5\", \"s\");\n    } else if (selectedCondition == \"DR\") {\n      predictImagesWithRoboflow(\"https://classify.roboflow.com/diabetic-retinopathy-vx084/1\", \"vCVdDSLxRqd2Grqzl1bO\", \"s\");\n    } else {\n      console.log(\"wrong selection with: \" + selectedCondition);\n    }\n    // const PredicImageFunctionSelecter = () => {\n    //   if (selectedCondition == \"Glaucoma\") {\n    //     predictImagesWithRoboflow();\n    //     // predictImagesWithAzureBackend(\n    //     //   // \"https://reseachbackend.azurewebsites.net/predict/glaucoma\", \"s\"\n    //     // );\n    //   } else if (selectedCondition == \"Cataract\") {\n    //     predictImagesWithAzureBackend(\n    //       \"https://reseachbackend.azurewebsites.net/predict/cataract\", \"s\"\n    //     );\n    //   } else if (selectedCondition == \"DME\") {\n    //     predictImagesWithAzureBackend(\n    //       \"https://reseachbackend.azurewebsites.net/predict/dme\", \"s\"\n    //     );\n    //   } else if (selectedCondition == \"DR\") {\n    //     predictImagesWithAzureBackend(\n    //       \"https://reseachbackend.azurewebsites.net/predict/dr\", \"s\"\n    //     );\n    //   } else {\n    //     console.log(\"wrong selection with: \" + selectedCondition);\n    //   }\n  };\n  if (selectedCondition == \"DME\") {}\n  const findHighestConfidence = predictions => {\n    let highestConfidence = 0;\n    for (const key in predictions) {\n      if (predictions[key].confidence > highestConfidence) {\n        highestConfidence = predictions[key].confidence;\n      }\n    }\n    return highestConfidence;\n  };\n  const findClass = predictClass => {\n    if (predictClass == \"Cataract\") {\n      return \"Cataract\";\n    } else if (predictClass == \"Glaucoma\") {\n      return \"Glaucoma\";\n    } else if (predictClass == \"Retinopathy\") {\n      return \"Diabetic Retinopathy\";\n    } else if (predictClass == \"DME\") {\n      return \"Diabetic Macular Edema\";\n    } else {\n      return \"Normal\";\n    }\n  };\n  const FirebaseImageUploader = async () => {\n    const upoloadingimage = priviewImage;\n    const storage = getStorage();\n    if (upoloadingimage) {\n      try {\n        const storageRef = ref(storage, `images/${uuidv4() + \"_\" + fileName}`);\n        const uploadTask = uploadBytesResumable(storageRef, dataURLtoBlob(upoloadingimage));\n        uploadTask.on(\"state_changed\", snapshot => {\n          const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n          console.log(\"Upload is \" + progress + \"% done\");\n        }, error => {\n          console.log(error);\n        }, () => {\n          getDownloadURL(uploadTask.snapshot.ref).then(url => {\n            console.log(\"File uploaded successfully\");\n            console.log(url);\n            firebaesDocumentUpload(url);\n          }).catch(error => {\n            console.log(error);\n          });\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    } else {\n      console.log(\"no image is selected\");\n    }\n  };\n  const firebaesDocumentUpload = async imageUrl => {\n    console.log(\"firebase document upload started.\");\n    try {\n      const submitData = {\n        date: currentTimestamp.format(\"YYYY-MM-DD\"),\n        pationID: documentId,\n        results: predictionResult,\n        image_url: imageUrl,\n        rawData: rawPredictionResult,\n        comment: dcommet,\n        type: selectedCondition,\n        staus: \"pending\"\n      };\n      const docRef = await addDoc(resultRef, submitData);\n      const newDocId = docRef.id;\n      console.log(submitData);\n      console.log(\"Data submitted to Firebase successfully\");\n      console.log(\"Newly added document ID:\", newDocId);\n      setSnackbarMessage(\"Report Proceeded successfully\");\n      setOpenSnackbar(true);\n      setTimeout(() => {\n        history(\"/admin/dashboard\"); // Replace with your actual dashboard route\n      }, 1000);\n    } catch (error) {\n      console.error(\"Error submitting data to Firebase:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: documentId ? /*#__PURE__*/_jsxDEV(Row, {\n        children: [\" \", /*#__PURE__*/_jsxDEV(Col, {\n          md: \"7\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"card-user\",\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                children: \"Patient Info\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              className: \" col-md-10 mx-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-3 \",\n                    children: \"Full Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"col-md-auto \",\n                    children: \":\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 419,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-5 \",\n                    children: paientData.fullName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 420,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-3 \",\n                    children: \"Gender \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 424,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"col-md-auto \",\n                    children: \":\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 425,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-5 \",\n                    children: paientData.gender\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-3 \",\n                    children: \"Mobile No\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 430,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"col-md-auto \",\n                    children: \":\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 431,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-5 \",\n                    children: paientData.mobileNo\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 432,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 429,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-3 \",\n                    children: \"NIC\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 435,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"col-md-auto \",\n                    children: \":\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 436,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \" col col-lg-5 \",\n                    children: paientData.identityCardNo\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 437,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 434,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                children: \"Submit Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" p-2 \",\n                children: /*#__PURE__*/_jsxDEV(ToggleButtonGroup, {\n                  style: {\n                    display: \"flex\",\n                    justifyContent: \"center\"\n                  },\n                  value: selectedCondition,\n                  exclusive: true,\n                  onChange: handleConditionChange,\n                  children: [/*#__PURE__*/_jsxDEV(ToggleButton, {\n                    value: \"Glaucoma\",\n                    children: \"Glaucoma\"\n                  }, \"Glaucoma\", false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 454,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n                    value: \"DME\",\n                    children: \"Diabetic Macular Edema\"\n                  }, \"DME\", false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 460,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(ToggleButton, {\n                    value: \"DR\",\n                    children: \"Diabetic Retinopathy\"\n                  }, \"DR\", false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \" col-md-7 mx-4\",\n                children: /*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"image-input\",\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"outlined\",\n                    component: \"span\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      accept: \"image/*\",\n                      onChange: handleImageChange,\n                      id: \"image-input\" // You can remove the id if it's not needed\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 497,\n                      columnNumber: 25\n                    }, this), \"Select Image\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 496,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 495,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: selectedImage && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"mx-4\",\n                    children: \"Seletd Image Preview\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 510,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: selectedImage,\n                    alt: \"Selected\",\n                    style: {\n                      marginLeft: \"4%\",\n                      maxWidth: \"25%\",\n                      maxHeight: \"300px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 511,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 509,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 507,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-3  col-md-5 mx-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn \"\n                  // style={{ backgroundColor: \"blue\" }}\n                  ,\n                  onClick: PredicImageFunctionSelecter,\n                  disabled: uploading || !selectedImage || !selectedCondition,\n                  children: uploading ? \"Predicting...\" : \"Predict\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 534,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  className: \"mx-3\",\n                  color: \"green\",\n                  variant: \"contained\",\n                  onClick: FirebaseImageUploader,\n                  disabled: !documentId || !predictionResult,\n                  children: \"Save\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n                  open: openSnackbar,\n                  autoHideDuration: 6000,\n                  onClose: handleCloseSnackbar,\n                  anchorOrigin: {\n                    vertical: \"top\",\n                    horizontal: \"center\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(MuiAlert, {\n                    onClose: handleCloseSnackbar,\n                    severity: snackbarMessage.includes(\"successfully\") ? \"success\" : \"error\",\n                    sx: {\n                      width: \"100%\"\n                    },\n                    children: snackbarMessage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 562,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 553,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 533,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 13\n        }, this), predictionResult ?\n        /*#__PURE__*/\n        // Check if predictionResult is not null\n        _jsxDEV(Col, {\n          md: \"5\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"card-user\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"image\",\n              children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                className: \"mt-3 w-25 mx-auto\",\n                children: \"Result\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 583,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 582,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"author\",\n                children: [priviewImage && /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: priviewImage,\n                    alt: \"Selected\",\n                    style: {\n                      maxWidth: \"100%\",\n                      maxHeight: \"300px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 589,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 588,\n                  columnNumber: 25\n                }, this), predictionResult && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row mt-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \" col col-lg-4  \",\n                      children: \"Result\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 600,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"col-md-auto \",\n                      children: \":\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 601,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \" col col-lg-6\",\n                      children: predictionResult.top\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 602,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 599,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"col-lg-4 \",\n                      children: \"Modal Confidance\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 607,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"col-md-auto \",\n                      children: \":\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 608,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \" col col-lg-3 \",\n                      children: [(predictionResult.confidence * 100).toFixed(2), \"%\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 609,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 606,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 598,\n                  columnNumber: 25\n                }, this)\n\n                // <div className=\"p-3\">\n                //   <p>Result : {predictionResult.top}</p>\n                //   <p>\n                //     Modal Confidence : {predictionResult.confidence}\n                //   </p>\n                // </div>\n                ]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 585,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 581,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 580,\n          columnNumber: 15\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          style: {\n            marginTop: 140\n          },\n          className: \"mx-auto\",\n          md: \"5\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                children: \"Select Patient\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 633,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 632,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              children: /*#__PURE__*/_jsxDEV(Form, {\n                children: /*#__PURE__*/_jsxDEV(Row, {\n                  className: \"\",\n                  children: /*#__PURE__*/_jsxDEV(Col, {\n                    className: \"\",\n                    children: /*#__PURE__*/_jsxDEV(FormGroup, {\n                      className: \"row\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"  col-md-4 mt-2\",\n                        children: \"Patient Number :\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 642,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Input, {\n                        value: phoneNumber,\n                        onChange: e => setPhoneNumber(e.target.value),\n                        className: \"w-50\",\n                        maxLength: 10,\n                        defaultValue: \"Creative Code Inc.\",\n                        placeholder: \"Telephone..\",\n                        type: \"text\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 645,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Button, {\n                        onClick: handleSearch,\n                        className: \"btn-round w-25 mx-auto mt-4\",\n                        color: \"primary\",\n                        children: \"Submit\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 654,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n                        open: openSnackbar,\n                        autoHideDuration: 6000,\n                        onClose: handleCloseSnackbar,\n                        anchorOrigin: {\n                          vertical: \"top\",\n                          horizontal: \"center\"\n                        },\n                        children: /*#__PURE__*/_jsxDEV(MuiAlert, {\n                          onClose: handleCloseSnackbar,\n                          severity: snackbarMessage.includes(\"successfully\") ? \"success\" : \"error\",\n                          sx: {\n                            width: \"25%\"\n                          },\n                          children: snackbarMessage\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 670,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 661,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 641,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 640,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 639,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(Prediction, \"L1CEtja74PfInO3UptVnwPcb/tg=\", false, function () {\n  return [useNavigate];\n});\n_c = Prediction;\nexport default Prediction;\nvar _c;\n$RefreshReg$(_c, \"Prediction\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","collection","query","where","getDoc","doc","getDocs","addDoc","ToggleButton","ToggleButtonGroup","getStorage","ref","uploadBytesResumable","getDownloadURL","db","Snackbar","MuiAlert","Button","Card","CardHeader","CardBody","CardFooter","CardTitle","FormGroup","Form","Input","Row","Col","axios","v4","uuidv4","moment","jsxDEV","_jsxDEV","Fragment","_Fragment","dataURLtoBlob","dataURL","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","Blob","type","Prediction","_s","phoneNumber","setPhoneNumber","documentId","setDocumentId","history","paientData","setPatientData","fileName","setFileName","selectedImage","setSelectedImage","priviewImage","setPriviewImage","predictionResult","setPredictionResult","selectedCondition","setSelectedCondition","uploading","setUploading","rawPredictionResult","setRawPredictionResult","currentTimestamp","setCurrentTimestamp","dcommet","setDcommnet","resultRef","openSnackbar","setOpenSnackbar","snackbarMessage","setSnackbarMessage","handleCloseSnackbar","event","reason","getPatientDetails","docRef","docSnap","exists","console","log","data","handleImageChange","e","file","target","files","name","reader","FileReader","onload","result","readAsDataURL","handleConditionChange","newCondition","handleSearch","q","querySnapshot","empty","document","docs","id","sessionStorage","setItem","setTimeout","predictImagesWithRoboflow","url","apiKey","method","params","api_key","headers","then","response","findClass","predicted_classes","findHighestConfidence","predictions","top","confidence","catch","error","PredicImageFunctionSelecter","highestConfidence","key","predictClass","FirebaseImageUploader","upoloadingimage","storage","storageRef","uploadTask","on","snapshot","progress","bytesTransferred","totalBytes","firebaesDocumentUpload","imageUrl","submitData","date","format","pationID","results","image_url","rawData","comment","staus","newDocId","children","className","md","tag","_jsxFileName","lineNumber","columnNumber","fullName","gender","mobileNo","identityCardNo","style","display","justifyContent","value","exclusive","onChange","htmlFor","variant","component","accept","src","alt","marginLeft","maxWidth","maxHeight","onClick","disabled","color","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","severity","includes","sx","width","toFixed","marginTop","maxLength","defaultValue","placeholder","_c","$RefreshReg$"],"sources":["C:/New folder (9)/Diabetic-Retinopathy-Detection-main/Final Hosted Web/DockerRepo-RP-main/src/views/Prediction.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport {\n  collection,\n  query,\n  where,\n  getDoc,\n  doc,\n  getDocs,\n  addDoc,\n} from \"firebase/firestore\"; // Make sure to import the appropriate Firestore functions\nimport { ToggleButton, ToggleButtonGroup } from \"@mui/material\";\nimport {\n  getStorage,\n  ref,\n  uploadBytesResumable,\n  getDownloadURL,\n} from \"firebase/storage\";\nimport { db } from \"../firebaseConfig.js\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport MuiAlert from \"@mui/material/Alert\";\n\nimport {\n  Button,\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  CardTitle,\n  FormGroup,\n  Form,\n  Input,\n  Row,\n  Col,\n} from \"reactstrap\";\nimport axios from \"axios\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport moment from \"moment\";\nimport \"./cstyles.css\";\n\nfunction dataURLtoBlob(dataURL) {\n  const arr = dataURL.split(\",\");\n  const mime = arr[0].match(/:(.*?);/)[1];\n  const bstr = atob(arr[1]);\n  let n = bstr.length;\n  const u8arr = new Uint8Array(n);\n  while (n--) {\n    u8arr[n] = bstr.charCodeAt(n);\n  }\n  return new Blob([u8arr], { type: mime });\n}\n\nconst Prediction = () => {\n  const [phoneNumber, setPhoneNumber] = useState(\"\");\n  const [documentId, setDocumentId] = useState(null);\n  const history = useNavigate();\n  const [paientData, setPatientData] = useState([]);\n  const [fileName, setFileName] = useState(\"\");\n  const [selectedImage, setSelectedImage] = useState(null);\n  const [priviewImage, setPriviewImage] = useState(null);\n  const [predictionResult, setPredictionResult] = useState(null);\n  const [selectedCondition, setSelectedCondition] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [rawPredictionResult, setRawPredictionResult] = useState(null);\n  const [currentTimestamp, setCurrentTimestamp] = useState(moment());\n  const [dcommet, setDcommnet] = useState(\"\");\n  const resultRef = collection(db, \"predictions\");\n\n  const [openSnackbar, setOpenSnackbar] = React.useState(false);\n  const [snackbarMessage, setSnackbarMessage] = React.useState(\"\");\n\n  const handleCloseSnackbar = (event, reason) => {\n    if (reason === \"clickaway\") {\n      return;\n    }\n    setOpenSnackbar(false);\n  };\n\n  useEffect(() => {\n    if (documentId) {\n      getPatientDetails();\n    }\n  }, [documentId]);\n\n  const getPatientDetails = async () => {\n    const docRef = doc(db, \"patientDetails\", documentId);\n    const docSnap = await getDoc(docRef);\n    if (docSnap.exists()) {\n      console.log(\"Document data:\", docSnap.data());\n      setPatientData(docSnap.data());\n    } else {\n      console.log(\"No Patient data document!\");\n    }\n  };\n\n  const handleImageChange = (e) => {\n    console.log(\"error : 404\");\n    const file = e.target.files[0];\n    if (file) {\n      setFileName(file.name);\n      console.log(file.name);\n      const reader = new FileReader();\n      reader.onload = (event) => {\n        setSelectedImage(event.target.result);\n        setPriviewImage(null);\n        setPredictionResult(null);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleConditionChange = (event, newCondition) => {\n    setSelectedCondition(newCondition);\n    console.log(newCondition + \" mode selected\");\n  };\n\n  const handleSearch = async () => {\n    if (phoneNumber) {\n      const q = query(\n        collection(db, \"patientDetails\"),\n        where(\"mobileNo\", \"==\", phoneNumber)\n      );\n      const querySnapshot = await getDocs(q);\n\n      if (!querySnapshot.empty) {\n        const document = querySnapshot.docs[0];\n        setDocumentId(document.id);\n        await sessionStorage.setItem(\"documentId\", document.id);\n\n        // history(\"/patient\");\n        // history(\"/admin/prediction\");\n      } else {\n        // setDocumentId(\"Document not found\");\n        // sessionStorage.removeItem(\"documentId\");\n        setSnackbarMessage(\"Patient is not registerd, Please Register\");\n        setOpenSnackbar(true);\n        setTimeout(() => {\n          history(\"/admin/user-page\"); // Replace with your actual dashboard route\n        }, 3000);\n      }\n    }\n  };\n\n  // const predictImagesWithAzureBackend = async (url, type) => {\n  //   if (selectedImage) {\n  //     setUploading(true);\n  //     const formData = new FormData();\n  //     formData.append('image', dataURLtoBlob(selectedImage)); \n\n\n  //     console.log(\"stared prediction with \" + selectedCondition + \" selected.\");\n  //     axios.post(url, formData)\n  //     // axios({\n  //     //   method: \"POST\",\n  //     //   url: url,\n  //     //   params: {\n  //     //     api_key: apiKey,\n  //     //   },\n  //     //   data: selectedImage,\n  //     //   headers: {\n  //     //     \"Content-Type\": \"application/x-www-form-urlencoded\",\n  //     //   },\n  //     // })\n  //       .then(function (response) {\n  //         console.log(response.data);\n  //         setRawPredictionResult(response.data);\n  //         if (type == \"m\") {\n  //           setPredictionResult({\n  //             top: findClass(response.data.predicted_classes),\n  //             confidence: findHighestConfidence(response.data.predictions),\n  //           });\n  //         } else {\n  //           // setPredictionResult(response.data);\n  //           if (response.data.top == \"Preprocessed_cataract\") {\n  //             setPredictionResult({\n  //               top: \"Cataract Positive\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else if (response.data.top == \"Preprocessed_normal\") {\n  //             setPredictionResult({\n  //               top: \"Cataract Negative\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else if (response.data.top == \"Glaucoma\") {\n  //             setPredictionResult({\n  //               top: \"Glaucoma Positive\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else if (response.data.top == \"NonGlaucoma\") {\n  //             setPredictionResult({\n  //               top: \"Glaucoma Negative\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else if (response.data.top == \"dr\") {\n  //             setPredictionResult({\n  //               top: \"Diabetes Retinopathy Positive\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else if (response.data.top == \"no-dr\") {\n  //             setPredictionResult({\n  //               top: \"Diabetes Retinopathy Negative\",\n  //               confidence: response.data.confidence,\n  //             });\n  //           } else {\n  //             setPredictionResult({\n  //               top: response.data.top,\n  //               confidence: response.data.confidence,\n  //             });\n  //           }\n  //           // setPredictionResult({\n  //           //   top: response.data.top,\n  //           //   confidence: response.data.confidence,\n  //           // });\n  //         }\n  //         setPriviewImage(selectedImage);\n  //         setUploading(false);\n  //         setSelectedImage(null);\n  //       })\n  //       .catch(function (error) {\n  //         console.log(\"prediction is unsuccessfull with error : \" + error);\n  //         setUploading(false);\n  //       });\n  //   }\n  // };\n\n  // Roboflow Prediction Code\n// }\nconst predictImagesWithRoboflow = async (url, apiKey, type)=>{\n    if (selectedImage){\n        setUploading(true);\n        console.log (\"stared prediction with \"+ selectedCondition+\" selected.\");\n        axios({\n            method: \"POST\",\n            url: url,\n            params: {\n                api_key: apiKey\n            },\n            data: selectedImage,\n            headers: {\n              \"Content-Type\": \"application/x-www-form-urlencoded\"\n            }\n        }).then (function (response){\n            console.log(response.data);\n            setRawPredictionResult(response.data);\n            if (type ==\"m\"){\n                setPredictionResult(\n                    {\"top\": findClass(response.data.predicted_classes),\n                    \"confidence\":findHighestConfidence(response.data.predictions) }\n                );\n            }else{\n                // setPredictionResult(response.data);\n                setPredictionResult(\n                    {\"top\": response.data.top,\n                    \"confidence\":response.data.confidence }\n                );\n            }\n            setPriviewImage(selectedImage);\n            setUploading(false);\n            setSelectedImage(null);\n        }).catch(function(error){\n            console.log(\"prediction is unsuccessfull with error : \" + error);\n            setUploading(false);\n        })\n    }\n\n};\n\n\nconst PredicImageFunctionSelecter = () =>{\n  if (selectedCondition == \"auto\"){\n    predictImagesWithRoboflow(\"https://classify.roboflow.com/diabetes-eye/1\",\"0T0aK7Xjd9yIzFwoaeXP\",\"m\")\n  } else if (selectedCondition == \"Glaucoma\"){\n    predictImagesWithRoboflow(\"https://classify.roboflow.com/glaucoma-detection-yinkv/1\",\"5C7iBYDUnNm6VVwqY7t1\",\"s\")\n  }else if (selectedCondition == \"Cataract\"){\n    predictImagesWithRoboflow(\"https://classify.roboflow.com/cataract-classification-thmfz/4\",\"DLxfzIwIH2SKWI74qxdY\",\"s\")\n  }else if (selectedCondition == \"DME\"){\n    predictImagesWithRoboflow(\"https://detect.roboflow.com/retinal-classifaction/1\",\"LNJN6fBuYKJvibYHYDg5\",\"s\")\n  }else if (selectedCondition == \"DR\"){\n    predictImagesWithRoboflow(\"https://classify.roboflow.com/diabetic-retinopathy-vx084/1\",\"vCVdDSLxRqd2Grqzl1bO\",\"s\")\n  }else{\n    console.log (\"wrong selection with: \"+ selectedCondition)\n  }\n  // const PredicImageFunctionSelecter = () => {\n  //   if (selectedCondition == \"Glaucoma\") {\n  //     predictImagesWithRoboflow();\n  //     // predictImagesWithAzureBackend(\n  //     //   // \"https://reseachbackend.azurewebsites.net/predict/glaucoma\", \"s\"\n  //     // );\n  //   } else if (selectedCondition == \"Cataract\") {\n  //     predictImagesWithAzureBackend(\n  //       \"https://reseachbackend.azurewebsites.net/predict/cataract\", \"s\"\n  //     );\n  //   } else if (selectedCondition == \"DME\") {\n  //     predictImagesWithAzureBackend(\n  //       \"https://reseachbackend.azurewebsites.net/predict/dme\", \"s\"\n  //     );\n  //   } else if (selectedCondition == \"DR\") {\n  //     predictImagesWithAzureBackend(\n  //       \"https://reseachbackend.azurewebsites.net/predict/dr\", \"s\"\n  //     );\n  //   } else {\n  //     console.log(\"wrong selection with: \" + selectedCondition);\n  //   }\n  };\n\n  if (selectedCondition == \"DME\") {\n    \n  }\n\n  const findHighestConfidence = (predictions) => {\n    let highestConfidence = 0;\n    for (const key in predictions) {\n      if (predictions[key].confidence > highestConfidence) {\n        highestConfidence = predictions[key].confidence;\n      }\n    }\n    return highestConfidence;\n  };\n\n  const findClass = (predictClass) => {\n    if (predictClass == \"Cataract\") {\n      return \"Cataract\";\n    } else if (predictClass == \"Glaucoma\") {\n      return \"Glaucoma\";\n    } else if (predictClass == \"Retinopathy\") {\n      return \"Diabetic Retinopathy\";\n    } else if (predictClass == \"DME\") {\n      return \"Diabetic Macular Edema\";\n    } else {\n      return \"Normal\";\n    }\n  };\n\n  const FirebaseImageUploader = async () => {\n    const upoloadingimage = priviewImage;\n    const storage = getStorage();\n    if (upoloadingimage) {\n      try {\n        const storageRef = ref(storage, `images/${uuidv4() + \"_\" + fileName}`);\n        const uploadTask = uploadBytesResumable(\n          storageRef,\n          dataURLtoBlob(upoloadingimage)\n        );\n\n        uploadTask.on(\n          \"state_changed\",\n          (snapshot) => {\n            const progress =\n              (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n            console.log(\"Upload is \" + progress + \"% done\");\n          },\n          (error) => {\n            console.log(error);\n          },\n          () => {\n            getDownloadURL(uploadTask.snapshot.ref)\n              .then((url) => {\n                console.log(\"File uploaded successfully\");\n                console.log(url);\n                firebaesDocumentUpload(url);\n              })\n              .catch((error) => {\n                console.log(error);\n              });\n          }\n        );\n      } catch (error) {\n        console.log(error);\n      }\n    } else {\n      console.log(\"no image is selected\");\n    }\n  };\n\n  const firebaesDocumentUpload = async (imageUrl) => {\n    console.log(\"firebase document upload started.\");\n    try {\n      const submitData = {\n        date: currentTimestamp.format(\"YYYY-MM-DD\"),\n        pationID: documentId,\n        results: predictionResult,\n        image_url: imageUrl,\n        rawData: rawPredictionResult,\n        comment: dcommet,\n        type: selectedCondition,\n        staus: \"pending\",\n      };\n      const docRef = await addDoc(resultRef, submitData);\n      const newDocId = docRef.id;\n      console.log(submitData);\n      console.log(\"Data submitted to Firebase successfully\");\n      console.log(\"Newly added document ID:\", newDocId);\n      setSnackbarMessage(\"Report Proceeded successfully\");\n      setOpenSnackbar(true);\n      setTimeout(() => {\n        history(\"/admin/dashboard\"); // Replace with your actual dashboard route\n      }, 1000);\n    } catch (error) {\n      console.error(\"Error submitting data to Firebase:\", error);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"content\">\n        {documentId ? (\n          <Row>\n            {\" \"}\n            {/* form and patient dtl */}\n            <Col md=\"7\">\n              <Card className=\"card-user\">\n                <CardHeader>\n                  <CardTitle tag=\"h5\">Patient Info</CardTitle>\n                </CardHeader>\n                <CardBody className=\" col-md-10 mx-4\">\n                  <div className=\"\">\n                    <div className=\"row\">\n                      <p className=\" col col-lg-3 \">Full Name</p>\n                      <p className=\"col-md-auto \">:</p>\n                      <p className=\" col col-lg-5 \">{paientData.fullName}</p>\n                    </div>\n\n                    <div className=\"row\">\n                      <p className=\" col col-lg-3 \">Gender </p>\n                      <p className=\"col-md-auto \">:</p>\n                      <p className=\" col col-lg-5 \">{paientData.gender}</p>\n                    </div>\n\n                    <div className=\"row\">\n                      <p className=\" col col-lg-3 \">Mobile No</p>\n                      <p className=\"col-md-auto \">:</p>\n                      <p className=\" col col-lg-5 \">{paientData.mobileNo}</p>\n                    </div>\n                    <div className=\"row\">\n                      <p className=\" col col-lg-3 \">NIC</p>\n                      <p className=\"col-md-auto \">:</p>\n                      <p className=\" col col-lg-5 \">\n                        {paientData.identityCardNo}\n                      </p>\n                    </div>\n                  </div>\n                </CardBody>\n                <CardHeader>\n                  <CardTitle tag=\"h5\">Submit Image</CardTitle>\n                </CardHeader>\n                <CardBody>\n                  <div className=\" p-2 \">\n                    <ToggleButtonGroup\n                      style={{ display: \"flex\", justifyContent: \"center\" }}\n                      value={selectedCondition}\n                      exclusive\n                      onChange={handleConditionChange}\n                    >\n                      <ToggleButton key=\"Glaucoma\" value=\"Glaucoma\">\n                        Glaucoma\n                      </ToggleButton>\n                      {/* <ToggleButton key=\"Cataract\" value=\"Cataract\">\n                        Cataract\n                      </ToggleButton> */}\n                      <ToggleButton key=\"DME\" value=\"DME\">\n                        Diabetic Macular Edema\n                      </ToggleButton>\n                      <ToggleButton key=\"DR\" value=\"DR\">\n                        Diabetic Retinopathy\n                      </ToggleButton>\n                      {/* <ToggleButton value=\"auto\">AUTO</ToggleButton>\n                      {selectedCondition == \"auto\" ? (\n                        <ToggleButton value=\"manual\">Manual</ToggleButton>\n                      ) : (\n                        [\n                          <ToggleButton key=\"Glaucoma\" value=\"Glaucoma\">\n                            Glaucoma\n                          </ToggleButton>,\n                          <ToggleButton key=\"Cataract\" value=\"Cataract\">\n                            Cataract\n                          </ToggleButton>,\n                          <ToggleButton key=\"DME\" value=\"DME\">\n                            DME\n                          </ToggleButton>,\n                          <ToggleButton key=\"DR\" value=\"DR\">\n                            DR\n                          </ToggleButton>,\n                        ]\n                      )} */}\n                    </ToggleButtonGroup>\n                  </div>\n                  <div className=\" col-md-7 mx-4\">\n                    {/* <input\n                      type=\"file\"\n                      accept=\"image/*\"\n                      onChange={handleImageChange}\n                      id=\"image-input\" // You can remove the id if it's not needed\n                    /> */}\n\n                    <label htmlFor=\"image-input\">\n                      <Button variant=\"outlined\" component=\"span\">\n                        <input\n                          type=\"file\"\n                          accept=\"image/*\"\n                          onChange={handleImageChange}\n                          id=\"image-input\" // You can remove the id if it's not needed\n                        />\n                        Select Image\n                      </Button>\n                    </label>\n                  </div>\n                  <div>\n                    {selectedImage && (\n                      <div>\n                        <h5 className=\"mx-4\">Seletd Image Preview</h5>\n                        <img\n                          src={selectedImage}\n                          alt=\"Selected\"\n                          style={{\n                            marginLeft: \"4%\",\n                            maxWidth: \"25%\",\n                            maxHeight: \"300px\",\n                          }}\n                        />\n                      </div>\n                    )}\n                  </div>\n                  {/* <Button\n                    variant=\"contained\"\n                    color=\"blue\"\n                    onClick={PredicImageFunctionSelecter}\n                    disabled={uploading || !selectedImage || !selectedCondition}\n                    sx={{ mt: 2 }}\n                  >\n                    {uploading ? \"Predicting...\" : \"Predict\"}\n                  </Button> */}\n\n                  <div className=\"mt-3  col-md-5 mx-4\">\n                    <button\n                      className=\"btn \"\n                      // style={{ backgroundColor: \"blue\" }}\n                      onClick={PredicImageFunctionSelecter}\n                      disabled={\n                        uploading || !selectedImage || !selectedCondition\n                      }\n                    >\n                      {uploading ? \"Predicting...\" : \"Predict\"}\n                    </button>\n                    <Button\n                      className=\"mx-3\"\n                      color=\"green\"\n                      variant=\"contained\"\n                      onClick={FirebaseImageUploader}\n                      disabled={!documentId || !predictionResult}\n                    >\n                      Save\n                    </Button>\n                    <Snackbar\n                      open={openSnackbar}\n                      autoHideDuration={6000}\n                      onClose={handleCloseSnackbar}\n                      anchorOrigin={{\n                        vertical: \"top\",\n                        horizontal: \"center\",\n                      }}\n                    >\n                      <MuiAlert\n                        onClose={handleCloseSnackbar}\n                        severity={\n                          snackbarMessage.includes(\"successfully\")\n                            ? \"success\"\n                            : \"error\"\n                        }\n                        sx={{ width: \"100%\" }}\n                      >\n                        {snackbarMessage}\n                      </MuiAlert>\n                    </Snackbar>\n                  </div>\n                </CardBody>\n              </Card>\n            </Col>\n            {/* imge display and result */}\n            {predictionResult ? ( // Check if predictionResult is not null\n              <Col md=\"5\">\n                <Card className=\"card-user\">\n                  <div className=\"image\">\n                    <h3 className=\"mt-3 w-25 mx-auto\">Result</h3>\n                  </div>\n                  <CardBody>\n                    <div className=\"author\">\n                      {priviewImage && (\n                        <div>\n                          <img\n                            src={priviewImage}\n                            alt=\"Selected\"\n                            style={{ maxWidth: \"100%\", maxHeight: \"300px\" }}\n                          />\n                        </div>\n                      )}\n\n                      {predictionResult && (\n                        <div className=\"\">\n                          <div className=\"row mt-4\">\n                            <p className=\" col col-lg-4  \">Result</p>\n                            <p className=\"col-md-auto \">:</p>\n                            <p className=\" col col-lg-6\">\n                              {predictionResult.top}\n                            </p>\n                          </div>\n                          <div className=\"row\">\n                            <p className=\"col-lg-4 \">Modal Confidance</p>\n                            <p className=\"col-md-auto \">:</p>\n                            <p className=\" col col-lg-3 \">\n                              {(predictionResult.confidence * 100).toFixed(2)}%\n                            </p>\n                          </div>\n                        </div>\n\n                        // <div className=\"p-3\">\n                        //   <p>Result : {predictionResult.top}</p>\n                        //   <p>\n                        //     Modal Confidence : {predictionResult.confidence}\n                        //   </p>\n                        // </div>\n                      )}\n                    </div>\n                  </CardBody>\n                </Card>\n              </Col>\n            ) : null}\n          </Row>\n        ) : (\n          <Row>\n            <Col style={{ marginTop: 140 }} className=\"mx-auto\" md=\"5\">\n              <Card>\n                <CardHeader>\n                  <CardTitle tag=\"h5\">Select Patient</CardTitle>\n                </CardHeader>\n                {/* <div className=\"card rounded-3\"></div> */}\n\n                <CardBody>\n                  <Form>\n                    <Row className=\"\">\n                      <Col className=\"\">\n                        <FormGroup className=\"row\">\n                          <label className=\"  col-md-4 mt-2\">\n                            Patient Number :\n                          </label>\n                          <Input\n                            value={phoneNumber}\n                            onChange={(e) => setPhoneNumber(e.target.value)}\n                            className=\"w-50\"\n                            maxLength={10}\n                            defaultValue=\"Creative Code Inc.\"\n                            placeholder=\"Telephone..\"\n                            type=\"text\"\n                          />\n                          <Button\n                            onClick={handleSearch}\n                            className=\"btn-round w-25 mx-auto mt-4\"\n                            color=\"primary\"\n                          >\n                            Submit\n                          </Button>\n                          <Snackbar\n                            open={openSnackbar}\n                            autoHideDuration={6000}\n                            onClose={handleCloseSnackbar}\n                            anchorOrigin={{\n                              vertical: \"top\",\n                              horizontal: \"center\",\n                            }}\n                          >\n                            <MuiAlert\n                              onClose={handleCloseSnackbar}\n                              severity={\n                                snackbarMessage.includes(\"successfully\")\n                                  ? \"success\"\n                                  : \"error\"\n                              }\n                              sx={{ width: \"25%\" }}\n                            >\n                              {snackbarMessage}\n                            </MuiAlert>\n                          </Snackbar>\n                        </FormGroup>\n                      </Col>\n                    </Row>\n                  </Form>\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Prediction;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}